# 3DViewer
Цель проекта: реализовать библиотеку decimal.h на языке программирования Си.

## Содержание

0. [Описание](#Описание)
1. [Сборка](#Сборка)
2. [Основные характеристики](#Основные-характеристики)
3. [Содержание библиотеки](#Содержание-библиотеки)


## Описание

Эта библиотека добавляет возможность работы с типом "decimal", который отсутствует в стандарте языка Си.

## Сборка

Сборка библиотеки производится при помощи Makefile, содержащим следующие цели:
- all - чистит файлы, образовавшиеся в процессе сборки библиотеки и тестов, и запускает тесты
- decimal.a - собирает библиотеку Decimal
- clean - чистит файлы, образующиеся в процессе сборки и тестирования программы
- test - запускает модульные тесты
- check - запускает модульные тесты, проводит стилистическую проверку кода, проверяет программу при помощи cppcheck и проверяет на утечки памяти
- gcov_report - формирует HTML-страницу с отчетом о покрытии кода тестами и открывает его .

## Основные характеристики

- Библиотека разработана на языке Си стандарта C11 с использованием компиятора gcc
- Библиотека разработана в соответствии с принципами структурного программирования
- По условиям задания запрещено использование типа __int128
- Определяемый тип поддерживает числа от -79 228 162 514 264 337 593 543 950 335 до +79 228 162 514 264 337 593 543 950 335
- Число Decimal реализовано в виде четырехэлементного массива 32-разрядных целых чисел со знаком (`int bits[4];`).

`bits[0]`, `bits[1]`, и `bits[2]` содержат младшие, средние и старшие 32 бита 96-разрядного целого числа соответственно.

`bits[3]` содержит коэффициент масштабирования и знак, и состоит из следующих частей:
- Биты от 0 до 15 не используются и всегда равны нулю.
- Биты с 16 по 23 содержат показатель степени от 0 до 28, который указывает степень 10 для разделения целого числа.
- Биты с 24 по 30 не используются и всегда равны нулю.
- Бит 31 содержит знак; 0 означает положительный, а 1 означает отрицательный.

## Содержание библиотеки

## Арифметические операторы

| Название оператора | Оператор  | Функция                                                                    | 
| ------ | ------ |----------------------------------------------------------------------------|
| Сложение | + | int my_add(my_decimal value_1, my_decimal value_2, my_decimal *result)  |
| Вычитание | - | int my_sub(my_decimal value_1, my_decimal value_2, my_decimal *result) |
| Умножение | * | int my_mul(my_decimal value_1, my_decimal value_2, my_decimal *result) | 
| Деление | / | int my_div(my_decimal value_1, my_decimal value_2, my_decimal *result) |
| Остаток от деления | Mod | int my_mod(my_decimal value_1, my_decimal value_2, my_decimal *result) |

Функции возвращают код ошибки:
- 0 - OK
- 1 - число слишком велико или равно бесконечности
- 2 - число слишком мало или равно отрицательной бесконечности
- 3 - деление на 0

*Уточнение про числа, не вмещающиеся в мантиссу:*
- *При получении чисел, не вмещающихся в мантиссу при арифметических операциях, используется банковское округление (например, 79,228,162,514,264,337,593,543,950,335 - 0.6 = 79,228,162,514,264,337,593,543,950,334)*

*Уточнение про операцию mod:*
- *Если в результате операции произошло переполнение, то дробная часть отбрасывается (например, 70,000,000,000,000,000,000,000,000,000 % 0.001 = 0.000)*


### Операторы сравнение

| Название оператора | Оператор  | Функция | 
| ------ | ------ | ------ |
| Меньше  | < | int my_is_less(my_decimal, my_decimal) |
| Меньше или равно | <= | int my_is_less_or_equal(my_decimal, my_decimal) | 
| Больше | \> |  int my_is_greater(my_decimal, my_decimal) |
| Больше или равно | \>= | int my_is_greater_or_equal(my_decimal, my_decimal) | 
| Равно | == |  int my_is_equal(my_decimal, my_decimal) |
| Не равно | != |  int my_is_not_equal(my_decimal, my_decimal) |

Возвращаемое значение:
- 0 - FALSE
- 1 - TRUE

### Преобразователи

| Преобразователь | Функция | 
| ------ | ------ |
| Из int | int my_from_int_to_decimal(int src, my_decimal *dst) |
| Из float  | int my_from_float_to_decimal(float src, my_decimal *dst) |
| В int  | int my_from_decimal_to_int(my_decimal src, int *dst) |
| В float  | int my_from_decimal_to_float(my_decimal src, float *dst) |

Возвращаемое значение - код ошибки:
- 0 - OK
- 1 - ошибка конвертации

*Уточнение про преобразование числа типа float:*
- *Если числа слишком малы (0 < |x| < 1e-28), возвращается ошибка и значение, равное 0*
- *Если числа слишком велики (|x| > 79,228,162,514,264,337,593,543,950,335) или равны бесконечности, возвращается ошибка*
- *При обработке числа с типом float преобразовываются все содержащиеся в нём цифры*

*Уточнение про преобразование из числа типа decimal в тип int:*
- *Если в числе типа decimal есть дробная часть, то она отбрасывается (например, 0.9 преобразуется 0)*


### Другие функции

| Описание | Функция                                                  | 
| ------ |----------------------------------------------------------|
| Округляет указанное Decimal число до ближайшего целого числа в сторону отрицательной бесконечности. | int my_floor(my_decimal value, my_decimal *result)    |	
| Округляет Decimal до ближайшего целого числа. | int my_round(my_decimal value, my_decimal *result)    |
| Возвращает целые цифры указанного Decimal числа; любые дробные цифры отбрасываются, включая конечные нули. | int my_truncate(my_decimal value, my_decimal *result) |
| Возвращает результат умножения указанного Decimal на -1. | int my_negate(my_decimal value, my_decimal *result)   |

Возвращаемое значение - код ошибки:
- 0 - OK
- 1 - ошибка вычисления